<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <title>Track Order - Hotel Vijay</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50 min-h-screen flex items-center justify-center p-6">
    <div class="bg-white w-full max-w-md rounded-3xl shadow-2xl p-8 text-center">
        <div id="loader" class="text-6xl mb-4">ğŸ‘¨â€ğŸ³</div>
        <h1 id="inv-display" class="text-2xl font-black text-slate-800">#Checking...</h1>
        <div id="status-badge" class="mt-6 inline-block px-10 py-4 rounded-full font-black text-lg bg-orange-100 text-orange-600 animate-pulse uppercase">PENDING</div>
        <p class="mt-8 text-gray-500 text-sm italic">Bhai, Chef ne aapka order dekh liya hai. Khana aa raha hai!</p>
        <button onclick="location.href='index.html'" class="mt-10 w-full py-4 rounded-2xl bg-slate-900 text-white font-bold">Order More</button>
    </div>

    <script>
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwQUMyN5rBmSztswmu16HBnvz27XhVnTt1aOdpEoFITeEiH22BM_ocNKb5Ub1_2EGZH/exec";
        const invID = new URLSearchParams(window.location.search).get('id');
        document.getElementById('inv-display').innerText = "#" + invID;

        async function checkStatus() {
            try {
                const res = await fetch(SCRIPT_URL + "?t=" + new Date().getTime());
                const orders = await res.json();
                const myOrder = orders.find(o => String(o.invoice_no) === String(invID));
                if(myOrder) {
                    const badge = document.getElementById('status-badge');
                    const loader = document.getElementById('loader');
                    const status = myOrder.status.toLowerCase().trim();
                    badge.innerText = myOrder.status.toUpperCase();
                    if(status === "preparing") { badge.className = "mt-6 inline-block px-10 py-4 rounded-full font-black bg-blue-100 text-blue-600 animate-bounce"; loader.innerText = "ğŸ”¥"; }
                    if(status === "ready") { badge.className = "mt-6 inline-block px-10 py-4 rounded-full font-black bg-green-500 text-white"; loader.innerText = "ğŸ˜‹"; }
                }
            } catch (e) { console.log(e); }
        }
        setInterval(checkStatus, 8000); checkStatus();
    </script>
</body>
</html>
